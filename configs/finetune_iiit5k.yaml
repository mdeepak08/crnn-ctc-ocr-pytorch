base: configs/base.yaml

datasets:
  train_csv: data/processed/iiit5k_train.csv
  val_csv: data/processed/iiit5k_test.csv

train:
  # NOTE: When using `--resume checkpoints/best_by_cer.pt`, your checkpoint may already be at a higher epoch.
  # `train.py` interprets `train.epochs` as the *total* max epoch index, so it must be > resumed start_epoch.
  epochs: 25
  batch_size: 64
  lr: 0.0002
  early_stop_patience: 3
  # IMPORTANT: This checkpoint's best CER came from MJSynth val; reset it so IIIT-5K can define its own "best".
  reset_best_on_resume: true
  # Beam search without a language model can be worse than greedy for CTC; use greedy for model selection.
  decoder_for_val: greedy
  beam_width: 5

# Enable real-world augmentations during fine-tuning (val/test are kept clean).
augment:
  enabled: true
  perspective_p: 0.20
  perspective_distortion: 0.30
  affine_p: 0.40
  affine_degrees: 2.5
  affine_translate: 0.03
  affine_scale_min: 0.85
  affine_scale_max: 1.15
  photometric_p: 0.45
  brightness: 0.30
  contrast: 0.30
  blur_p: 0.20
  blur_radius_max: 1.4
  jpeg_p: 0.20
  jpeg_quality_min: 25
  jpeg_quality_max: 85

